# 目录说明（pos-front-management）

本说明文档用于帮助开发者快速理解项目目录结构、关键文件用途以及常规开发入口。

## 顶层目录
- `.env.local` / `.env.staging` / `.env.production`
  - 环境变量文件，前端可用的变量以 `NEXT_PUBLIC_` 开头，例如 `NEXT_PUBLIC_API_BASE_URL`（用于 `lib/utils.ts` 的 API 基地址）。
- `.gitignore`
  - Git 忽略规则。
- `package.json` / `package-lock.json`
  - 项目依赖与脚本定义。
- `tailwind.config.ts` / `postcss.config.js`
  - Tailwind 与 PostCSS 配置。
- `next.config.mjs` / `next-env.d.ts` / `tsconfig.json`
  - Next.js、TypeScript 相关配置与类型环境。
- `public/`
  - 静态资源目录（例如 `favicon.ico`）。
- `docs/`
  - 项目文档：
  - `前端代码规范.md`：编码规范与组件设计思路。
  - `模块开发指南.md`：新增功能模块（如“员工模块”）的开发流程与规范。
  - `目录说明.md`：当前文档，目录用途说明。

## 业务代码目录
- `app/`
  - Next.js App Router 根目录。所有页面、布局、样式、上下文均在此下管理。
  - `layout.tsx`
    - 全局根布局文件，应用 `DashboardLayout` 包裹所有页面。
  - `globals.css`
    - 全局样式文件（Tailwind 基础样式引入位置）。
  - `page.tsx`
    - 根路由页面（通常不直接使用；当前 `middleware.ts` 将 `/` 重定向到 `/login`）。
  - `DashboardLayout.tsx`
    - 仪表盘整体布局：集成 Sidebar、语言与全局数据 Provider、页面主内容区。
    - 当路径为 `/login` 时隐藏 Sidebar，其余页面显示。
  - `DashboardSidebar.tsx`
    - 左侧导航栏（Sidebar）组件，包含餐厅维度与账户维度的导航项。
    - 通过 `onPageChange` 通知 `DashboardLayout` 执行路由跳转。
  - `GlobalDataContext.tsx`
    - 全局业务数据上下文（如组织、餐厅列表、当前餐厅等）。
  - `LanguageContext.tsx`
    - 多语言上下文与 `t(key)` 翻译函数（客户端组件，内部安全使用 `localStorage` 持久化语言）。
  - `translations.ts`
    - 多语言文案词典（中/英文）。新增文案请在此文件维护。
  - `dashboard/`
    - 仪表盘主页路由：`app/dashboard/page.tsx`。含登录态校验（未登录跳转 `/login`）。
  - `hardwareshop/`
    - 商店模块：`layout.tsx`、`page.tsx`、`Shop.tsx` 及子目录（如 `shop/`）。
  - `(login)/login/`
    - 登录模块：`page.tsx` 为登录入口，`components/` 存放登录相关组件（如 `LoginPage.tsx` 等）。
  - `(restaurants)/restaurants/`
    - 餐厅模块路由分组：
    - `page.tsx` 为餐厅列表页面。
    - 可包含子路由，如 `[id]/staff/`（员工模块子页面）、`[id]/layouts/` 等。

## 组件与工具
- `components/`
  - 共享组件目录。
  - `template-documentation.tsx`
    - 模板/示例文档组件（如需）。
  - `ui/`
    - 基于 shadcn/ui 的通用 UI 组件（按钮、卡片、表格、输入框、侧边栏等）。
    - 注意：组件均为无状态可复用，结合业务页面使用。
  - `ui/toaster.tsx`
    - 全局 Toast 容器组件，结合 `hooks/use-toast` 使用。
- `hooks/`
  - 项目级自定义 hook。
  - `use-mobile.tsx`
    - 判断移动端视角等逻辑。
  - `use-toast.ts`
    - 全局 Toast 管理（配合 `Toaster` 组件）。
- `lib/`
  - 库与工具目录。
  - `utils.ts`
    - `cn()`：className 合并工具。
    - `api`：HTTP 客户端轻量封装（基于 Axios）。
      - 提供 `api.get/post/put/delete<T>()`，返回 `Promise<T>`（即 `response.data`），在 `api/*` 中直接按数据类型使用。

## 接口与类型
- `api/`
  - 业务接口方法目录。
  - `login.ts`
    - 登录/注册/忘记密码等接口方法，以及 `authUtils`（登录态工具）
    - 示例：`loginApi.login()`、`loginApi.register()`、`authUtils.isLoggedIn()`。
- `types/`
  - 全局类型声明目录。
  - `api.d.ts`
    - 为 `@/api/login` 提供类型声明，供类型系统统一使用。

## 中间件与重定向
- `middleware.ts`
  - 根路径 `/` 重定向到 `/login`。
  - 可扩展其它路由级中间件逻辑（如权限控制）。

## 约定与最佳实践
- 路由与模块：
  - 使用 App Router 的文件式路由；模块建议按维度分组（如 `(restaurants)`）。
  - 餐厅维度路由建议形如：`/restaurants/[id]/<module>/`。
- Sidebar 集成：
  - 在 `DashboardSidebar.tsx` 中维护导航项，并于 `DashboardLayout.tsx` 的 `handlePageChange` 做 `router.push` 映射。
- 多语言：
  - 所有文案走 `t(key)`，在 `translations.ts` 中维护中英文。
- SSR 安全：
  - 需要访问 `localStorage` 的上下文/组件使用 `"use client"` 并判断 `typeof window !== 'undefined'`。
- 接口层：
  - 统一通过 `lib/utils.ts` 的 `api` 客户端进行调用；类型通过泛型传递，避免直接使用 `AxiosResponse<T>`。

## 开发入口与命令
- 开发：`npm run dev`（默认监听 `http://localhost:3000`）
- 构建：`npm run build`
- 预览：`npm run start`

如需新增具体业务模块（例如“员工模块”）的详细开发步骤与示例，请参考 `docs/模块开发指南.md`。